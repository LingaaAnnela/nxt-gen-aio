import{d as de,e as pe,k as ce,m as ue}from"./chunk-NAFLJKYD.js";import{a as me}from"./chunk-RFKMXYIH.js";import{$a as r,Ba as n,Bd as ae,Cb as P,Fa as I,Ga as B,Hb as l,Ib as s,Id as k,Jd as le,La as m,Lb as H,Qa as v,Sc as W,Tc as X,Ua as E,Vb as J,Wa as c,Xa as z,Ya as G,Za as U,Zd as se,_a as a,ab as f,ad as T,db as A,ea as R,eb as N,ec as V,fb as _,g as F,ib as M,ja as O,jd as Y,ka as x,kd as g,la as y,ld as Z,mb as Q,md as ee,nb as L,ob as K,pd as C,qa as $,qb as d,qd as te,rb as b,rd as ie,s as D,sb as u,ua as j,ud as ne,vd as re,zd as oe}from"./chunk-M2TS3627.js";var ye=["addressModal"];function Ne(i,t){i&1&&(a(0,"div",12),d(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"title_is_required")," "))}function Se(i,t){i&1&&(a(0,"div",12),d(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"street_address_is_required")," "))}function we(i,t){i&1&&(a(0,"div",12),d(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"country_is_required")," "))}function Me(i,t){i&1&&(a(0,"div",12),d(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"state_is_required")," "))}function Ie(i,t){if(i&1&&(a(0,"div",16)(1,"div",9)(2,"label",14),d(3),l(4,"translate"),r(),m(5,we,3,3,"div",12),r()(),a(6,"div",16)(7,"div",9)(8,"label",14),d(9),l(10,"translate"),r(),m(11,Me,3,3,"div",12),r()()),i&2){let e=_(2);n(3),b(s(4,4,"country")),n(2),c(e.form.controls.country_id.touched&&(e.form.controls.country_id.errors!=null&&e.form.controls.country_id.errors.required)?5:-1),n(4),b(s(10,6,"state")),n(2),c(e.form.controls.state_id.touched&&(e.form.controls.state_id.errors!=null&&e.form.controls.state_id.errors.required)?11:-1)}}function Ae(i,t){i&1&&(a(0,"div",12),d(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"city_is_required")," "))}function Be(i,t){i&1&&(a(0,"div",12),d(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"pincode_is_required")," "))}function Ee(i,t){i&1&&(a(0,"div",12),d(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"phone_number_is_required")," "))}function Pe(i,t){i&1&&(a(0,"div",12),d(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"phone_number_is_invalid")," "))}function Te(i,t){if(i&1&&(a(0,"div",19)(1,"div",9)(2,"label",14),d(3),l(4,"translate"),r(),f(5,"input",23),l(6,"translate"),m(7,Ee,3,3,"div",12)(8,Pe,3,3,"div",12),r()()),i&2){let e=_(2);n(3),b(s(4,4,"phone_number")),n(2),M("placeholder",s(6,6,"enter_phone")),n(2),c(e.form.controls.phone.touched&&(e.form.controls.phone.errors!=null&&e.form.controls.phone.errors.required)?7:-1),n(),c(e.form.controls.phone.touched&&(e.form.controls.phone.errors!=null&&e.form.controls.phone.errors.pattern)?8:-1)}}function Ve(i,t){if(i&1){let e=A();a(0,"div",1)(1,"h3",2),d(2),l(3,"translate"),r(),a(4,"app-button",3),N("click",function(){let o=x(e).$implicit;return y(o.dismiss("Cross click"))}),f(5,"i",4),r()(),a(6,"form",5),N("ngSubmit",function(){x(e);let o=_();return y(o.submit())}),a(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),d(12),l(13,"translate"),r(),f(14,"input",11),l(15,"translate"),m(16,Ne,3,3,"div",12),r()(),a(17,"div",13)(18,"div",9)(19,"label",14),d(20),l(21,"translate"),r(),f(22,"input",15),l(23,"translate"),m(24,Se,3,3,"div",12),r()(),m(25,Ie,12,8),a(26,"div",16)(27,"div",9)(28,"label",14),d(29),l(30,"translate"),r(),f(31,"input",17),l(32,"translate"),m(33,Ae,3,3,"div",12),r()(),a(34,"div",16)(35,"div",9)(36,"label",14),d(37),l(38,"translate"),r(),f(39,"input",18),l(40,"translate"),m(41,Be,3,3,"div",12),r()(),m(42,Te,9,8,"div",19),r(),a(43,"div",20)(44,"app-button",21),N("click",function(){let o=x(e).$implicit;return y(o.dismiss("Cancel"))}),d(45),l(46,"translate"),r(),a(47,"app-button",22),d(48),l(49,"translate"),r()()()()}if(i&2){let e=_();n(2),u(" ",s(3,30,e.address?"edit_address":"add_address")," "),n(2),E("btn btn-close"),v("spinner",!1)("id","address_modal_close_btn"),n(2),v("formGroup",e.form),n(6),b(s(13,32,"title")),n(2),M("placeholder",s(15,34,"enter_title")),n(2),c(e.form.controls.title.touched&&(e.form.controls.title.errors!=null&&e.form.controls.title.errors.required)?16:-1),n(4),b(s(21,36,"address")),n(2),M("placeholder",s(23,38,"enter_address")),n(2),c(e.form.controls.street.touched&&(e.form.controls.street.errors!=null&&e.form.controls.street.errors.required)?24:-1),n(),c(e.isBrowser?25:-1),n(4),b(s(30,40,"city")),n(2),M("placeholder",s(32,42,"enter_city")),n(2),c(e.form.controls.city.touched&&(e.form.controls.city.errors!=null&&e.form.controls.city.errors.required)?33:-1),n(4),b(s(38,44,"pincode")),n(2),M("placeholder",s(40,46,"enter_pincode")),n(2),c(e.form.controls.pincode.touched&&(e.form.controls.pincode.errors!=null&&e.form.controls.pincode.errors.required)?41:-1),n(),c(e.isBrowser?42:-1),n(2),E("btn btn-theme-outline btn-md fw-bold"),v("type","button")("spinner",!1)("id","cancel_addres_btn"),n(),u(" ",s(46,48,"cancel")," "),n(2),E("btn theme-bg-color btn-md fw-bold text-light"),v("id","submit_address_btn"),n(),u(" ",s(49,50,"submit")," ")}}var _e=class i{constructor(t,e,p,o){this.modalService=t;this.platformId=e;this.store=p;this.formBuilder=o;this.isBrowser=V(this.platformId),this.form=this.formBuilder.group({title:new C("",[g.required]),street:new C("",[g.required]),state_id:new C("",[g.required]),country_id:new C("",[g.required]),city:new C("",[g.required]),pincode:new C("",[g.required]),country_code:new C("91",[g.required]),phone:new C("",[g.required,g.pattern(/^[0-9]*$/)])})}form;closeResult;modalOpen=!1;states$;address;codes=me;isBrowser;AddressModal;countries$=R(T).select(ce.countries);countryChange(t){t&&t?.value?(this.states$=this.store.select(ue.states).pipe(D(e=>e(+t?.value))),this.address||this.form.controls.state_id.setValue("")):this.form.controls.state_id.setValue("")}openModal(t){return F(this,null,function*(){V(this.platformId)&&(this.modalOpen=!0,this.patchForm(t),this.modalService.open(this.AddressModal,{ariaLabelledBy:"address-add-Modal",centered:!0,windowClass:"theme-modal modal-lg"}).result.then(e=>{`${e}`},e=>{this.closeResult=`Dismissed ${this.getDismissReason(e)}`}))})}getDismissReason(t){return t===k.ESC?"by pressing ESC":t===k.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}patchForm(t){t?(this.address=t,this.form.patchValue({user_id:t?.user_id,title:t?.title,street:t?.street,country_id:t?.country_id,state_id:t?.state_id,city:t?.city,pincode:t?.pincode,country_code:t?.country_code,phone:t?.phone})):(this.address=null,this.form.reset(),this.form?.controls?.country_code.setValue("91"))}submit(){this.form.markAllAsTouched();let t=new de(this.form.value);this.address&&(t=new pe(this.form.value,this.address.id)),this.form.valid&&this.store.dispatch(t).subscribe({complete:()=>{this.form.reset(),this.address||this.form?.controls?.country_code.setValue("91")}})}ngOnDestroy(){this.modalOpen&&this.modalService.dismissAll()}static \u0275fac=function(e){return new(e||i)(I(le),I(j),I(T),I(oe))};static \u0275cmp=B({type:i,selectors:[["address-modal"]],viewQuery:function(e,p){if(e&1&&Q(ye,5),e&2){let o;L(o=K())&&(p.AddressModal=o.first)}},decls:2,vars:0,consts:[["addressModal",""],[1,"modal-header"],[1,"fw-semibold"],[3,"click","spinner","id"],[1,"ri-close-line"],[1,"",3,"ngSubmit","formGroup"],[1,"modal-body","address-form"],[1,"row","g-4"],[1,"col-xxl-12"],[1,""],["for","pname",1,"form-label"],["id","title","type","text","formControlName","title",1,"form-control",3,"placeholder"],[1,"invalid-feedback"],[1,"col-12"],["for","address1",1,"form-label"],["id","address","type","text","formControlName","street",1,"form-control",3,"placeholder"],[1,"col-6"],["id","city","type","text","formControlName","city",1,"form-control",3,"placeholder"],["id","pincode","type","text","formControlName","pincode","numbersOnly","",1,"form-control",3,"placeholder"],[1,"col-12","phone-field"],[1,"modal-footer"],[3,"click","type","spinner","id"],[3,"id"],["type","number","formControlName","phone","name","phone",1,"form-control","intl-input-padding",3,"placeholder"]],template:function(e,p){e&1&&m(0,Ve,50,52,"ng-template",null,0,H)},dependencies:[se,ae,te,Y,ie,Z,ee,ne,re,X,W],encapsulation:2})};var fe=i=>({disabled:i}),ke=i=>({"active disabled":i});function qe(i,t){if(i&1){let e=A();a(0,"li",1)(1,"a",4),N("click",function(){let o=x(e).$implicit,h=_(2);return y(h.pageSet(o))}),d(2),r()()}if(i&2){let e=t.$implicit,p=_(2);v("ngClass",P(2,ke,p.paginate.currentPage==e)),n(2),b(e)}}function Fe(i,t){if(i&1){let e=A();a(0,"ul",0)(1,"li",1)(2,"a",2),N("click",function(){x(e);let o=_();return y(o.pageSet(o.paginate.currentPage-1))}),f(3,"i",3),r()(),G(4,qe,3,4,"li",1,z),a(6,"li",1)(7,"a",4),N("click",function(){x(e);let o=_();return y(o.pageSet(o.paginate.currentPage+1))}),f(8,"i",5),r()()()}if(i&2){let e=_();n(),v("ngClass",P(2,fe,e.paginate.currentPage===1)),n(3),U(e.paginate.pages),n(2),v("ngClass",P(4,fe,e.paginate.currentPage==e.paginate.totalPages))}}var be=class i{total;currentPage;pageSize;setPage=new $;paginate;constructor(){}ngOnChanges(t){this.total=t.total?t.total.currentValue:this.total,this.currentPage=t.currentPage?t.currentPage.currentValue:this.currentPage,this.pageSize=t.pageSize?t.pageSize.currentValue:this.pageSize,this.paginate=this.getPager(this.total,this.currentPage,this.pageSize)}pageSet(t){this.setPage.emit(t)}getPager(t,e,p){let o=Number(Math.ceil(Number(t)/Number(p))),h=3;Number(e)<1?e=1:Number(e)>Number(o)&&(e=Number(o));let S,w;Number(o)<=Number(h)?(S=1,w=Number(o)):Number(e)<=Number(Math.floor(Number(h)/2))?(S=1,w=Number(h)):Number(e)>=Number(o)-Number(Math.floor(Number(h)/2))?(S=Number(o)-Number(h)+1,w=Number(o)):(S=Number(e)-Number(Math.floor(Number(h)/2)),w=Number(e)+Number(Math.floor(Number(h)/2)));let q=(Number(e)-1)*Number(p),ge=Math.min(Number(q)+Number(p)-1,Number(t)-1),he=Array.from(Array(Number(w)+1-Number(S)).keys()).map(ve=>Number(S)+Number(ve));return{totalItems:t,currentPage:e,pageSize:p,totalPages:o,startPage:S,endPage:w,startIndex:q,endIndex:ge,pages:he}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=B({type:i,selectors:[["app-pagination"]],inputs:{total:"total",currentPage:"currentPage",pageSize:"pageSize"},outputs:{setPage:"setPage"},features:[O],decls:1,vars:1,consts:[[1,"pagination","justify-content-center"],[1,"page-item",3,"ngClass"],["href","javascript:void(0)","tabindex","-1","aria-disabled","true",1,"page-link",3,"click"],[1,"ri-arrow-left-s-line"],["href","javascript:void(0)",1,"page-link",3,"click"],[1,"ri-arrow-right-s-line"]],template:function(e,p){e&1&&m(0,Fe,9,6,"ul",0),e&2&&c(p.paginate.pages&&p.paginate.pages.length?0:-1)},dependencies:[J],encapsulation:2})};export{_e as a,be as b};
