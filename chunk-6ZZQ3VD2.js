import{a as pe}from"./chunk-RFKMXYIH.js";import{a as k}from"./chunk-YCEHYFMY.js";import{Ad as se,Bb as P,Cc as X,Da as I,Dc as Y,Ea as E,Gb as l,Hb as s,Ja as m,Kb as J,Ld as de,Oa as h,Rb as W,Sa as A,Sc as T,Ua as c,Va as G,Wa as Q,Xa as U,Ya as a,Za as r,_a as f,aa as O,ac as V,ad as Z,bb as B,bd as g,cd as ee,db as N,dd as te,e as D,ea as $,eb as _,fa as x,ga as y,gd as C,hb as M,hd as ie,id as ne,la as j,lb as L,ld as re,mb as K,md as oe,nb as H,pb as p,q as R,qa as z,qb as b,qd as ae,rb as u,sd as le,ya as n,zd as q}from"./chunk-PWFZS6W4.js";var he=["addressModal"];function Ce(i,t){i&1&&(a(0,"div",12),p(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"title_is_required")," "))}function xe(i,t){i&1&&(a(0,"div",12),p(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"street_address_is_required")," "))}function ye(i,t){i&1&&(a(0,"div",12),p(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"country_is_required")," "))}function Ne(i,t){i&1&&(a(0,"div",12),p(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"state_is_required")," "))}function Se(i,t){if(i&1&&(a(0,"div",16)(1,"div",9)(2,"label",14),p(3),l(4,"translate"),r(),m(5,ye,3,3,"div",12),r()(),a(6,"div",16)(7,"div",9)(8,"label",14),p(9),l(10,"translate"),r(),m(11,Ne,3,3,"div",12),r()()),i&2){let e=_(2);n(3),b(s(4,4,"country")),n(2),c(e.form.controls.country_id.touched&&(e.form.controls.country_id.errors!=null&&e.form.controls.country_id.errors.required)?5:-1),n(4),b(s(10,6,"state")),n(2),c(e.form.controls.state_id.touched&&(e.form.controls.state_id.errors!=null&&e.form.controls.state_id.errors.required)?11:-1)}}function we(i,t){i&1&&(a(0,"div",12),p(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"city_is_required")," "))}function Me(i,t){i&1&&(a(0,"div",12),p(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"pincode_is_required")," "))}function Ie(i,t){i&1&&(a(0,"div",12),p(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"phone_number_is_required")," "))}function Be(i,t){i&1&&(a(0,"div",12),p(1),l(2,"translate"),r()),i&2&&(n(),u(" ",s(2,1,"phone_number_is_invalid")," "))}function Ee(i,t){if(i&1&&(a(0,"div",19)(1,"div",9)(2,"label",14),p(3),l(4,"translate"),r(),f(5,"input",23),l(6,"translate"),m(7,Ie,3,3,"div",12)(8,Be,3,3,"div",12),r()()),i&2){let e=_(2);n(3),b(s(4,4,"phone_number")),n(2),M("placeholder",s(6,6,"enter_phone")),n(2),c(e.form.controls.phone.touched&&(e.form.controls.phone.errors!=null&&e.form.controls.phone.errors.required)?7:-1),n(),c(e.form.controls.phone.touched&&(e.form.controls.phone.errors!=null&&e.form.controls.phone.errors.pattern)?8:-1)}}function Ae(i,t){if(i&1){let e=B();a(0,"div",1)(1,"h3",2),p(2),l(3,"translate"),r(),a(4,"app-button",3),N("click",function(){let o=x(e).$implicit;return y(o.dismiss("Cross click"))}),f(5,"i",4),r()(),a(6,"form",5),N("ngSubmit",function(){x(e);let o=_();return y(o.submit())}),a(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),p(12),l(13,"translate"),r(),f(14,"input",11),l(15,"translate"),m(16,Ce,3,3,"div",12),r()(),a(17,"div",13)(18,"div",9)(19,"label",14),p(20),l(21,"translate"),r(),f(22,"input",15),l(23,"translate"),m(24,xe,3,3,"div",12),r()(),m(25,Se,12,8),a(26,"div",16)(27,"div",9)(28,"label",14),p(29),l(30,"translate"),r(),f(31,"input",17),l(32,"translate"),m(33,we,3,3,"div",12),r()(),a(34,"div",16)(35,"div",9)(36,"label",14),p(37),l(38,"translate"),r(),f(39,"input",18),l(40,"translate"),m(41,Me,3,3,"div",12),r()(),m(42,Ee,9,8,"div",19),r(),a(43,"div",20)(44,"app-button",21),N("click",function(){let o=x(e).$implicit;return y(o.dismiss("Cancel"))}),p(45),l(46,"translate"),r(),a(47,"app-button",22),p(48),l(49,"translate"),r()()()()}if(i&2){let e=_();n(2),u(" ",s(3,30,e.address?"edit_address":"add_address")," "),n(2),A("btn btn-close"),h("spinner",!1)("id","address_modal_close_btn"),n(2),h("formGroup",e.form),n(6),b(s(13,32,"title")),n(2),M("placeholder",s(15,34,"enter_title")),n(2),c(e.form.controls.title.touched&&(e.form.controls.title.errors!=null&&e.form.controls.title.errors.required)?16:-1),n(4),b(s(21,36,"address")),n(2),M("placeholder",s(23,38,"enter_address")),n(2),c(e.form.controls.street.touched&&(e.form.controls.street.errors!=null&&e.form.controls.street.errors.required)?24:-1),n(),c(e.isBrowser?25:-1),n(4),b(s(30,40,"city")),n(2),M("placeholder",s(32,42,"enter_city")),n(2),c(e.form.controls.city.touched&&(e.form.controls.city.errors!=null&&e.form.controls.city.errors.required)?33:-1),n(4),b(s(38,44,"pincode")),n(2),M("placeholder",s(40,46,"enter_pincode")),n(2),c(e.form.controls.pincode.touched&&(e.form.controls.pincode.errors!=null&&e.form.controls.pincode.errors.required)?41:-1),n(),c(e.isBrowser?42:-1),n(2),A("btn btn-theme-outline btn-md fw-bold"),h("type","button")("spinner",!1)("id","cancel_addres_btn"),n(),u(" ",s(46,48,"cancel")," "),n(2),A("btn theme-bg-color btn-md fw-bold text-light"),h("id","submit_address_btn"),n(),u(" ",s(49,50,"submit")," ")}}var me=class i{constructor(t,e,d,o){this.modalService=t;this.platformId=e;this.store=d;this.formBuilder=o;this.isBrowser=V(this.platformId),this.form=this.formBuilder.group({title:new C("",[g.required]),street:new C("",[g.required]),state_id:new C("",[g.required]),country_id:new C("",[g.required]),city:new C("",[g.required]),pincode:new C("",[g.required]),country_code:new C("91",[g.required]),phone:new C("",[g.required,g.pattern(/^[0-9]*$/)])})}form;closeResult;modalOpen=!1;states$;address;codes=pe;isBrowser;AddressModal;countries$=O(T).select(k.countries);countryChange(t){t&&t?.value?(this.states$=this.store.select(k.states).pipe(R(e=>e.filter(d=>d.country_id===+t?.value))),this.address||this.form.controls.state_id.setValue("")):this.form.controls.state_id.setValue("")}openModal(t){return D(this,null,function*(){V(this.platformId)&&(this.modalOpen=!0,this.patchForm(t),this.modalService.open(this.AddressModal,{ariaLabelledBy:"address-add-Modal",centered:!0,windowClass:"theme-modal modal-lg"}).result.then(e=>{`${e}`},e=>{this.closeResult=`Dismissed ${this.getDismissReason(e)}`}))})}getDismissReason(t){return t===q.ESC?"by pressing ESC":t===q.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}patchForm(t){t?(this.address=t,this.form.patchValue({user_id:t?.user_id,title:t?.title,street:t?.street,country_id:t?.country_id,state_id:t?.state_id,city:t?.city,pincode:t?.pincode,country_code:t?.country_code,phone:t?.phone})):(this.address=null,this.form.reset(),this.form?.controls?.country_code.setValue("91"))}submit(){this.form.markAllAsTouched(),this.address,this.form.valid}ngOnDestroy(){this.modalOpen&&this.modalService.dismissAll()}static \u0275fac=function(e){return new(e||i)(I(se),I(z),I(T),I(ae))};static \u0275cmp=E({type:i,selectors:[["address-modal"]],viewQuery:function(e,d){if(e&1&&L(he,5),e&2){let o;K(o=H())&&(d.AddressModal=o.first)}},decls:2,vars:0,consts:[["addressModal",""],[1,"modal-header"],[1,"fw-semibold"],[3,"click","spinner","id"],[1,"ri-close-line"],[1,"",3,"ngSubmit","formGroup"],[1,"modal-body","address-form"],[1,"row","g-4"],[1,"col-xxl-12"],[1,""],["for","pname",1,"form-label"],["id","title","type","text","formControlName","title",1,"form-control",3,"placeholder"],[1,"invalid-feedback"],[1,"col-12"],["for","address1",1,"form-label"],["id","address","type","text","formControlName","street",1,"form-control",3,"placeholder"],[1,"col-6"],["id","city","type","text","formControlName","city",1,"form-control",3,"placeholder"],["id","pincode","type","text","formControlName","pincode","numbersOnly","",1,"form-control",3,"placeholder"],[1,"col-12","phone-field"],[1,"modal-footer"],[3,"click","type","spinner","id"],[3,"id"],["type","number","formControlName","phone","name","phone",1,"form-control","intl-input-padding",3,"placeholder"]],template:function(e,d){e&1&&m(0,Ae,50,52,"ng-template",null,0,J)},dependencies:[de,le,ie,Z,ne,ee,te,re,oe,Y,X],encapsulation:2})};var ce=i=>({disabled:i}),Pe=i=>({"active disabled":i});function Te(i,t){if(i&1){let e=B();a(0,"li",1)(1,"a",4),N("click",function(){let o=x(e).$implicit,v=_(2);return y(v.pageSet(o))}),p(2),r()()}if(i&2){let e=t.$implicit,d=_(2);h("ngClass",P(2,Pe,d.paginate.currentPage==e)),n(2),b(e)}}function Ve(i,t){if(i&1){let e=B();a(0,"ul",0)(1,"li",1)(2,"a",2),N("click",function(){x(e);let o=_();return y(o.pageSet(o.paginate.currentPage-1))}),f(3,"i",3),r()(),Q(4,Te,3,4,"li",1,G),a(6,"li",1)(7,"a",4),N("click",function(){x(e);let o=_();return y(o.pageSet(o.paginate.currentPage+1))}),f(8,"i",5),r()()()}if(i&2){let e=_();n(),h("ngClass",P(2,ce,e.paginate.currentPage===1)),n(3),U(e.paginate.pages),n(2),h("ngClass",P(4,ce,e.paginate.currentPage==e.paginate.totalPages))}}var ue=class i{total;currentPage;pageSize;setPage=new j;paginate;constructor(){}ngOnChanges(t){this.total=t.total?t.total.currentValue:this.total,this.currentPage=t.currentPage?t.currentPage.currentValue:this.currentPage,this.pageSize=t.pageSize?t.pageSize.currentValue:this.pageSize,this.paginate=this.getPager(this.total,this.currentPage,this.pageSize)}pageSet(t){this.setPage.emit(t)}getPager(t,e,d){let o=Number(Math.ceil(Number(t)/Number(d))),v=3;Number(e)<1?e=1:Number(e)>Number(o)&&(e=Number(o));let S,w;Number(o)<=Number(v)?(S=1,w=Number(o)):Number(e)<=Number(Math.floor(Number(v)/2))?(S=1,w=Number(v)):Number(e)>=Number(o)-Number(Math.floor(Number(v)/2))?(S=Number(o)-Number(v)+1,w=Number(o)):(S=Number(e)-Number(Math.floor(Number(v)/2)),w=Number(e)+Number(Math.floor(Number(v)/2)));let F=(Number(e)-1)*Number(d),_e=Math.min(Number(F)+Number(d)-1,Number(t)-1),fe=Array.from(Array(Number(w)+1-Number(S)).keys()).map(be=>Number(S)+Number(be));return{totalItems:t,currentPage:e,pageSize:d,totalPages:o,startPage:S,endPage:w,startIndex:F,endIndex:_e,pages:fe}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-pagination"]],inputs:{total:"total",currentPage:"currentPage",pageSize:"pageSize"},outputs:{setPage:"setPage"},features:[$],decls:1,vars:1,consts:[[1,"pagination","justify-content-center"],[1,"page-item",3,"ngClass"],["href","javascript:void(0)","tabindex","-1","aria-disabled","true",1,"page-link",3,"click"],[1,"ri-arrow-left-s-line"],["href","javascript:void(0)",1,"page-link",3,"click"],[1,"ri-arrow-right-s-line"]],template:function(e,d){e&1&&m(0,Ve,9,6,"ul",0),e&2&&c(d.paginate.pages&&d.paginate.pages.length?0:-1)},dependencies:[W],encapsulation:2})};export{me as a,ue as b};
